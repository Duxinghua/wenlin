(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/update/search"],{"04c9":function(t,e,i){"use strict";(function(t){i("4038");a(i("66fd"));var e=a(i("e046"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},3496:function(t,e,i){"use strict";var a=i("e201"),n=i.n(a);n.a},"74a4":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("03c0"));function n(t){return t&&t.__esModule?t:{default:t}}var s=function(){Promise.all([i.e("common/vendor"),i.e("wxcomponents/hch-poster/hch-poster")]).then(function(){return resolve(i("b7f5"))}.bind(null,i)).catch(i.oe)},o=function(){i.e("components/onshare/onshare").then(function(){return resolve(i("b185"))}.bind(null,i)).catch(i.oe)},c=function(){i.e("components/findFault/findFault").then(function(){return resolve(i("7aab"))}.bind(null,i)).catch(i.oe)},l=function(){i.e("components/help/help").then(function(){return resolve(i("f97e"))}.bind(null,i)).catch(i.oe)},u=function(){i.e("components/nodata/nodata").then(function(){return resolve(i("b641"))}.bind(null,i)).catch(i.oe)},d=function(){i.e("components/postItem/postitem").then(function(){return resolve(i("1a33"))}.bind(null,i)).catch(i.oe)},h=function(){i.e("components/struggler-navigationCustom/navigation-custom").then(function(){return resolve(i("e7f2"))}.bind(null,i)).catch(i.oe)},r={data:function(){return{scrollFixed:!1,isHome:!0,config:{title:"搜索",bgcolor:"white",fontcolor:"rgba(51, 51, 51, 1)",type:1,transparent:!1,linear:!1,share:!1},scrollTop:0,scrollMaxHeight:200,searchValue:"",tagList:[{id:0,tag:"全部"}],searchFlag:!1,scrollLeft:0,cateIndex:0,page:0,page_size:10,list:[],type:0,total_pages:0,nodataFlag:!1,allFlag:!0,helpObj:{},score:0,helpShow:!1,findFaultValue:!1,findFaultType:1,findFaultCollect:!1,findFaultObject:{},onShareShow:!1,pos:"no",deliveryFlag:!1,canvasFlag:!0,simpleFlag:!1,posterData:{marginLR:30,marginTB:80,radius:.03,innerLR:20,innerTB:20,posterRatio:1.3,posterImgUrl:"",title:"",titleFontSize:15,desFontSize:14,desLineHeight:22,titleLineHeight:24,posterCodeUrl:"https://sq.wenlinapp.com/upload/share/20200821/20200821233746683.png",codeWidth:.22,codeRatio:1,codeRadius:.5,codeMT:15,codeName:"问邻",codeNameMT:15,tips:"长按/扫描识别进入贴子",posterBgUrl:"",avatarUrl:t.getStorageSync("user").avatar,des:""},CustomBar:this.CustomBar}},mounted:function(){this.searchFlag||this.tagList.shift(),this.tagList=this.tagList=[{id:0,tag:"全部"}].concat(this.Tool.navList)},watch:{searchFlag:function(t){t?this.tagList.unshift({id:0,tag:"全部"}):this.tagList.shift()}},onShareAppMessage:function(e){var i="";return"button"==e.from?(i=this.findFaultObject.images.length?this.findFaultObject.images[0]:"https://sq.wenlinapp.com/appimg/send54.png",3==this.findFaultObject.publish_type?{title:this.findFaultObject.title,imageUrl:i,path:"/pages/index/detail?srouce=1&id="+this.findFaultObject.object_id+"&type="+this.findFaultObject.type+"&dynamics_id="+this.findFaultObject.id}:2==this.findFaultObject.publish_type?2==this.findFaultObject.publish_type&&5==this.findFaultObject.type?{title:this.findFaultObject.title,imageUrl:i,path:"/pages/index/cdetail?srouce=1&id="+this.findFaultObject.object_id+"&type="+this.findFaultObject.type+"&dynamics_id="+this.findFaultObject.id}:{title:this.findFaultObject.title,imageUrl:i,path:"/pages/index/detail?srouce=1&id="+this.findFaultObject.object_id+"&type="+this.findFaultObject.type+"&dynamics_id="+this.findFaultObject.id}:1==this.findFaultObject.publish_type?{title:this.findFaultObject.content.length>30?this.findFaultObject.content.substr(0,30)+"...":this.findFaultObject.content,imageUrl:i,path:"/pages/index/detail?srouce=1&id="+this.findFaultObject.id+"&type="+this.findFaultObject.type+"&dynamics_id="+this.findFaultObject.object_id}:{title:this.findFaultObject.title,imageUrl:i,path:"/pages/index/detail?srouce=1&id="+this.findFaultObject.id+"&type="+this.findFaultObject.type+"&dynamics_id="+this.findFaultObject.object_id}):(i="https://sq.wenlinapp.com/appimg/send54.png",{title:t.getStorageSync("user").user_nickname+"邀请您加入问邻，看小区新鲜事",imageUrl:i,path:"/pages/index/index"})},methods:{canvasCancel:function(t){this.scrollFixed=!1,this.canvasFlag=t},shareClick:function(t){this.findFaultObject=t,this.onShareShow=!0},onShowclose:function(){this.onShareShow=!1},onShowtodo:function(){var e=this;this.scrollFixed=!0;var i=getCurrentPages(),n=i[i.length-1];console.log(n.route);var s={};1==this.findFaultObject.publish_type||3==this.findFaultCollect.publish_type?s.page="pages/index/detail":2==this.findFaultCollect.publish_type&&5==this.findFaultCollect.type?s.page="pages/index/cdetail":s.page="pages/index/detail",5==this.findFaultObject.type?2==this.findFaultObject.publish_type?s.scene="id="+this.findFaultObject.object_id+"&type="+this.findFaultObject.type+"&d_id="+this.findFaultObject.id:s.scene="id="+this.findFaultObject.id+"&type="+this.findFaultObject.type:7==this.findFaultObject.type||8==this.findFaultObject.type?s.scene="id="+this.findFaultObject.object_id+"&type="+this.findFaultObject.type+"&d_id="+this.findFaultObject.id:s.scene="id="+this.findFaultObject.id+"&type="+this.findFaultObject.type,this.Api.getWXACodeUnlimit(s).then((function(i){1==i.code&&e.$nextTick((function(){e.onShareShow=!1,e.posterData.posterImgUrl=e.findFaultObject.images.length?e.findFaultObject.images[0]:"https://sq.wenlinapp.com/appimg/share500400.jpg",3==e.findFaultObject.publish_type||2==e.findFaultObject.publish_type?e.posterData.title=e.findFaultObject.title:1==e.findFaultObject.publish_type?e.posterData.title=e.findFaultObject.content:e.posterData.title=e.findFaultObject.title,e.posterData.title.length>35&&(e.posterData.title=e.posterData.title.substr(0,35)+"..."),e.posterData.avatarUrl=t.getStorageSync("user").avatar,e.posterData.posterCodeUrl=i.data,e.posterData.des=t.getStorageSync("user").user_nickname+"给你分享了一个"+a.default.resultValue(e.findFaultObject.type)+"信息",e.$forceUpdate(),setTimeout((function(){e.canvasFlag=!1,e.deliveryFlag=!1,e.$refs.hchPoster.posterShow()}),500)}))}))},onShowshare:function(){this.onShareShow=!1},moreClick:function(t){this.findFaultType=t.type,this.findFaultCollect=0!=t.user_favorite,this.findFaultObject=t,this.findFaultValue=!0},fCollect:function(e){var i=this,a={dynamics_id:this.findFaultObject.id,object_type:this.findFaultObject.type};5!=e.type&&7!=e.type||(a.dynamics_id=this.findFaultObject.object_id),0==this.findFaultObject.user_favorite?this.Api.setFavorites(a).then((function(e){1==e.code?(t.showToast({title:e.msg,duration:2e3}),i.findFaultValue=!1,i.searchDynamics()):t.showToast({title:e.msg,duration:2e3})})):1==this.findFaultObject.user_favorite&&this.Api.unsetFavorites(a).then((function(e){1==e.code?(t.showToast({title:e.msg,duration:2e3}),i.findFaultValue=!1,i.searchDynamics()):t.showToast({title:e.msg,duration:2e3})}))},fFind:function(t){this.findFaultValue=!1,this.messageText="",this.$forceUpdate(),this.messageShow=!0},report:function(){var e=this;t.navigateTo({url:"/pages/update/report?object_id="+this.findFaultObject.id+"&object_type="+this.findFaultObject.type,success:function(){e.findFaultValue=!1}})},fClose:function(){this.findFaultValue=!1},helpPush:function(e){var i=this;this.helpObj=e,this.$getMyscore((function(e){1==e.code&&(i.score=e.data.score,0==i.score?(t.showToast({title:"您的积分不足，请参加积分任务",icon:"none",duration:2e3}),setTimeout((function(){t.navigateTo({url:"/pages/update/integral"})}),2e3)):i.helpShow=!0)}))},Helpcancel:function(){this.helpShow=!1},ok:function(e){var i=this,a=this.$refs.Help.inputValue;if(a){var n={dynamics_id:this.helpObj.id,type:this.helpObj.type,community_id:t.getStorageSync("community_id"),score:a};this.Api.communityDynamicsPushDynamics(n).then((function(e){1==e.code?t.showToast({title:e.msg,duration:2e3,success:function(){setTimeout((function(){i.helpShow=!1,i.$refs.Help.inputValue=0,i.searchDynamics()}),500)}}):t.showToast({title:e.msg,duration:2e3,success:function(){}})}))}else t.showToast({title:"请输入帮推积分",icon:"none",duration:2e3})},cateHandler:function(t){this.type=t.id,this.cateIndex=t.id,0==t.id?this.allFlag=!0:this.allFlag=!1,this.searchFlag=!0,this.page=1,this.page_size=10,this.list=[],this.total_pages=0,this.$forceUpdate(),this.searchDynamics()},customConduct:function(){},cateClick:function(t){var e=this;this.cateIndex=t.id,this.tagList.map((function(i){i.id==t.id&&(e.type=t.id)})),this.page=1,this.page_size=10,this.list=[],this.total_pages=0,this.searchDynamics()},searcInput:function(t){this.searchValue=t.detail.value},searchClose:function(t){this.searchValue="",this.searchFlag=!1,this.nodataFlag=!1,this.list=[]},searchHandler:function(){this.searchValue?(this.searchFlag=!0,this.page=1,this.page_size=10,this.list=[],this.total_pages=0,this.searchDynamics()):t.showToast({icon:"none",title:"请输入搜索关键字"})},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1)},searchDynamics:function(e){var i=this,a={title:this.searchValue,community_id:t.getStorageSync("community_id"),page:this.page,page_size:this.page_size,type:this.type,latitude:t.getStorageSync("latitude"),longitude:t.getStorageSync("longitude")};this.Api.searchDynamics(a).then((function(t){1==t.code&&(e?(i.list=thic.list.concat(t.data.list),i.total_pages=t.data.total_pages):(i.list=t.data.list,i.total_pages=t.data.total_pages),i.list.length?i.nodataFlag=!1:i.nodataFlag=!0)}))}},components:{navigationCustom:h,PostItem:d,Nodata:u,Help:l,FindFault:c,Onshare:o,hchPoster:s}};e.default=r}).call(this,i("543d")["default"])},b384:function(t,e,i){"use strict";i.r(e);var a=i("74a4"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},df66:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement;t._self._c},s=[]},e046:function(t,e,i){"use strict";i.r(e);var a=i("df66"),n=i("b384");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("3496");var o,c=i("f0c5"),l=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"560e822e",null,!1,a["a"],o);e["default"]=l.exports},e201:function(t,e,i){}},[["04c9","common/runtime","common/vendor"]]]);