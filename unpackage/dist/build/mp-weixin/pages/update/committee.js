(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/update/committee"],{"208d":function(t,e,i){"use strict";var n=i("84c1"),o=i.n(n);o.a},"329a":function(t,e,i){"use strict";(function(t){i("4038");n(i("66fd"));var e=n(i("38d4"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"38d4":function(t,e,i){"use strict";i.r(e);var n=i("8bd0"),o=i("b879");for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("208d");var s,c=i("f0c5"),l=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"46f3ed86",null,!1,n["a"],s);e["default"]=l.exports},"84c1":function(t,e,i){},"8bd0":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={uImage:function(){return i.e("uview-ui/components/u-image/u-image").then(i.bind(null,"2a28"))}},o=function(){var t=this,e=t.$createElement,i=(t._self._c,t._f("formatTimeYMD")(t.detail.create_time)),n=t.__map(t.detail.dynamics,(function(e,i){var n=t.__get_orig(e),o=t._f("listValue")(e.type),a=t._f("formatTimeMd")(e.create_time);return{$orig:n,f1:o,f2:a}}));t.$mp.data=Object.assign({},{$root:{f0:i,l0:n}})},a=[]},b879:function(t,e,i){"use strict";i.r(e);var n=i("cf60"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},cf60:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;n(i("03c0"));function n(t){return t&&t.__esModule?t:{default:t}}var o=function(){i.e("components/bkhumor-emoji/index").then(function(){return resolve(i("e4da"))}.bind(null,i)).catch(i.oe)},a=function(){i.e("components/comment/comment").then(function(){return resolve(i("5711"))}.bind(null,i)).catch(i.oe)},s=function(){i.e("components/mobile/mobile").then(function(){return resolve(i("b758"))}.bind(null,i)).catch(i.oe)},c=function(){i.e("components/struggler-navigationCustom/navigation-custom").then(function(){return resolve(i("e7f2"))}.bind(null,i)).catch(i.oe)},l={data:function(){return{config:{title:"居委会",bgcolor:"white",fontcolor:"rgba(51, 51, 51, 1)",type:1,transparent:!0,linear:!1,share:!1},scrollTop:0,scrollMaxHeight:200,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,indicatorColor:"rgba(255, 255, 255, 1)",indicatorActiveColor:"rgba(255, 156, 0, 1)",navList:[{id:1,value:"简介",image:i("5e4e")},{id:2,value:"活动",image:i("1356")},{id:3,value:"便民",image:i("e94b")},{id:4,value:"招聘",image:i("4642")},{id:5,value:"动态",image:i("4642")}],navLists:[{id:1,value:"简介",image:i("cf5f")},{id:2,value:"工作人员",image:i("7bca")},{id:3,value:"电话",image:i("69fe")},{id:4,value:"导航",image:i("a76e")}],showReply:!1,committee_id:"",detail:{},wxsj:!1,mobileList:[],inputValues:"",inputValue:"",commitList:[],page:1,page_size:10,total_pages:0,parent_text:"给居委会留言",replyFlag:!1,autoBottom:0,scrollFixed:!1,showconfirmbar:!1,adjustposition:!1,replyTextarea:!1,textareaautofocus:!1,isShowEmj:!1,heightPx:"-100px"}},onShareAppMessage:function(){return{title:this.detail.title,imageUrl:this.detail.images&&this.detail.images.length?this.detail.images[0]:"https://sq.wenlinapp.com/appimg/send54.png"}},onShareTimeline:function(e){var i=this.detail.title,n={id:this.committee_id,community_id:t.getStorageSync("community_id")};return{title:i,imageUrl:this.detail.images&&this.detail.images.length?this.detail.images[0]:"https://sq.wenlinapp.com/appimg/send54.png",query:n}},mounted:function(){this.committee_id=this.$mp.query.id;var e={committee_id:this.committee_id};t.setStorageSync("committee_id",this.committee_id),this.$mp.query.community_id&&t.setStorageSync("community_id",this.$mp.query.community_id),this.getDetail(e),this.getList()},methods:{height:function(){var e=t.getSystemInfoSync(),i=e.platform,n=e.statusBarHeight,o=n+4;return"android"==i.toLowerCase()&&(o+=4),"-"+o+"38px"},replyInit:function(){1!=t.getStorageSync("singPage")?(this.replyTextarea=!0,this.textareaautofocus=!0,this.scrollFixed=!0):t.showToast({title:"请前往小程序使用完整服务",icon:"none",duration:2e3})},closeReplyInit:function(){this.replyTextarea=!1,this.textareaautofocus=!1,this.scrollFixed=!1,this.parent_text="给居委会留言"},postDetail:function(e){var i=e.type,n=e.publish_type;5==i&&2==n?t.navigateTo({url:"/pages/index/cdetail?dynamics_id="+e.id+"&type="+e.type+"&id="+e.object_id}):7==i||8==i?t.navigateTo({url:"/pages/index/detail?dynamics_id="+e.id+"&type="+e.type+"&id="+e.object_id}):t.navigateTo({url:"/pages/index/detail?id="+e.id+"&type="+e.type})},goAll:function(){t.navigateTo({url:"/pages/update/dynamicslist"})},InputBlur:function(t){this.autoBottom=0},getList:function(e){var i=this,n={page:this.page,page_size:this.page_size,community_id:t.getStorageSync("community_id"),committee_id:t.getStorageSync("committee_id")};this.Api.getLeaveMessages(n).then((function(t){if(e){var n=t.data.list;i.total_pages=t.data.total_pages,n.map((function(t){t.nodes=new String(t.content).toString().replace(/\[em\_(\d{1,3})\]/g,'<img class="imgemoji" style="width:21px" src=https://sq.wenlinapp.com/bkhumor-emoji/$1.gif  align=middle/>'),t.children&&t.children.map((function(t){t.nodes='<p style="display:inline-block"><i style="color:#ff9c00;font-style: inherit;margin-right:2px;white-space:nowrap">'+t.user.user_nickname+'</i> <i style="color:#333333;font-style: inherit;white-space:nowrap">回复</i> <i style="margin-left:2px;margin-right:2px;color:#ff9c00;font-style: inherit;white-space:nowrap">'+t.to_user.user_nickname+'</i>:<i style="margin-left:3px;font-style: inherit">'+new String(t.content).toString().replace(/\[em\_(\d{1,3})\]/g,'<span style="width:21px;height:21px;position:relative;margin-right:25px"><img style="position: absolute;left: 0;top: -2px;width:21px;" class="imgemoji" src=https://sq.wenlinapp.com/bkhumor-emoji/$1.gif  align=middle/></span>')+"</i></p>"}))})),i.commitList=i.commitList.concat(n)}else{n=t.data.list;i.total_pages=t.data.total_pages,n.map((function(t){t.nodes='<p style="display:inline-flex;align-items:center;">'+new String(t.content).toString().replace(/\[em\_(\d{1,3})\]/g,'<img class="imgemoji" style="width:21px" src=https://sq.wenlinapp.com/bkhumor-emoji/$1.gif  align=middle/>')+"</p>",t.children&&t.children.map((function(t){t.nodes='<p style="display:inline-block"><i style="color:#ff9c00;font-style: inherit;margin-right:2px;white-space:nowrap">'+t.user.user_nickname+'</i> <i style="color:#333333;font-style: inherit;white-space:nowrap">回复</i> <i style="margin-left:2px;margin-right:2px;color:#ff9c00;font-style: inherit;white-space:nowrap">'+t.to_user.user_nickname+'</i>:<i style="margin-left:3px;font-style: inherit">'+new String(t.content).toString().replace(/\[em\_(\d{1,3})\]/g,'<span style="width:21px;height:21px;position:relative;margin-right:25px"><img style="position: absolute;left: 0;top: -2px;width:21px;" class="imgemoji" src=https://sq.wenlinapp.com/bkhumor-emoji/$1.gif  align=middle/></span>')+"</i></p>"}))})),i.commitList=n}}))},closewxsj:function(){this.wxsj=!1},getDetail:function(t){var e=this;this.Api.getCommitteeDetail(t).then((function(t){if(1==t.code){e.detail=t.data;var i={text:"固话",num:e.detail.contacts};e.mobileList.push(i)}}))},closePicker:function(){},faceClick:function(){this.isShowEmj=!this.isShowEmj},handleEmj:function(t){"[em_98]"==t?this.inputValue=this.inputValue.replace(/(\[[^\]]+\]|[\s\S])$/,""):this.inputValue+=t},showEmj:function(){var t=!this.isShowEmj;this.emojiIcon=t?"cuIcon-keyboard":"cuIcon-emoji",this.isShowEmj=t,this.$emit("show")},InputFocus:function(t){this.autoBottom=t.detail.height,this.isShowEmj=!1,this.replyFlag=!1,this.$emit("foc")},inputValueHander:function(e){var i=this;if(this.inputValue){var n={community_id:t.getStorageSync("community_id"),committee_id:t.getStorageSync("committee_id"),content:this.inputValue};this.Api.setLeaveMessage(n).then((function(e){1==e.code&&t.showToast({icon:"success",title:e.msg,duration:2e3,success:function(){i.inputValue="",i.replyTextarea=!1,i.textareaautofocus=!1,i.scrollFixed=!1,i.showReply=!1,i.getList()}})}))}else t.showToast({icon:"",title:"请输入评论内容"})},navClick:function(e){1==e.id?t.navigateTo({url:"/pages/update/committeedetail?id="+this.committee_id}):2==e.id?t.navigateTo({url:"/pages/update/dynamicslist?type=5"}):3==e.id?t.navigateTo({url:"/pages/update/dynamicslist?type=7"}):4==e.id?t.navigateTo({url:"/pages/update/dynamicslist?type=15"}):5==e.id&&t.navigateTo({url:"/pages/update/dynamicslist?type=8"})},floverHandler:function(e){var i=this;if(1!=t.getStorageSync("singPage")){var n={object_id:e.id,object_type:11,community_id:t.getStorageSync("community_id")};7==this.type&&(n.dynamics_id=this.dynamics_id),0==e.user_like?this.Api.setLikes(n).then((function(n){1==n.code&&t.showToast({title:n.msg,duration:2e3,success:function(){i.$nextTick((function(){i.commitList.map((function(t){t.id==e.id&&(t.like=t.like+1,t.user_like=1)})),i.$forceUpdate()}))}})})):1==e.user_like&&this.Api.unsetLikes(n).then((function(n){1==n.code&&t.showToast({title:n.msg,duration:2e3,success:function(){i.$nextTick((function(){i.commitList.map((function(t){t.id==e.id&&(t.like=t.like?t.like-1:0,t.user_like=0)})),i.$forceUpdate()}))}})}))}else t.showToast({title:"请前往小程序使用完整服务",icon:"none",duration:2e3})}},onReachBottom:function(){console.log(1,"ss",this.total_pages,this.page),this.page<this.total_pages&&(this.page++,this.getList(!0))},components:{navigationCustom:c,Mobile:s,Comment:a,emotion:o},computed:{headerHeight:function(){return 96}}};e.default=l}).call(this,i("543d")["default"])}},[["329a","common/runtime","common/vendor"]]]);