(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/update/dareninfo"],{"0be5":function(t,i,e){"use strict";var n=e("3cec"),l=e.n(n);l.a},"11d9":function(t,i,e){"use strict";e.r(i);var n=e("4c3d"),l=e("eb77");for(var s in l)"default"!==s&&function(t){e.d(i,t,(function(){return l[t]}))}(s);e("0be5");var o,a=e("f0c5"),c=Object(a["a"])(l["default"],n["b"],n["c"],!1,null,"1c7d74d8",null,!1,n["a"],o);i["default"]=c.exports},"3cec":function(t,i,e){},"4c3d":function(t,i,e){"use strict";var n;e.d(i,"b",(function(){return l})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return n}));var l=function(){var t=this,i=t.$createElement;t._self._c},s=[]},"4f9a":function(t,i,e){"use strict";(function(t){e("4038");n(e("66fd"));var i=n(e("11d9"));function n(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("543d")["createPage"])},"88e7":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;l(e("03c0"));var n=e("b5bf");function l(t){return t&&t.__esModule?t:{default:t}}var s=function(){e.e("components/integraltip/integraltip").then(function(){return resolve(e("5c3c"))}.bind(null,e)).catch(e.oe)},o=function(){e.e("components/skill/skill").then(function(){return resolve(e("f2dc"))}.bind(null,e)).catch(e.oe)},a=function(){e.e("components/struggler-navigationCustom/navigation-custom").then(function(){return resolve(e("e7f2"))}.bind(null,e)).catch(e.oe)},c={data:function(){return{radioCurrent:1,radioList:[{value:1,name:"所有人",check:!0},{value:0,name:"本小区",check:!1}],config:{title:"达人信息",bgcolor:"white",fontcolor:"rgba(51, 51, 51, 1)",type:1,transparent:!1,linear:!1,share:!1},scrollTop:0,scrollMaxHeight:200,title:"",content:"",TabCur:0,scrollLeft:0,navlist:[],type:6,uploadList:[],liketext:"",buyList:[{name:"出售",value:1,check:!0},{name:"赠送",value:2,check:!1},{name:"出租",value:3,check:!1},{name:"求购",value:4,check:!1}],mobile:"",weixin:"",images:"",opening:1,sell_type:1,sell_price:"",sell_price1:"",sell_price2:"",inputType:1,priceView:!1,skillBoolean:!1,list:{1:"发布求助内容，有困难找邻居帮忙~",2:"身边的新鲜事，随时随地分享给邻居~",3:"发布闲置物品或求购信息，给闲置物品找一个新的主人~",4:"发布鹊桥信息，缘分也许就在邻里之间~",6:"给邻居们秀一下我的特长和技能~"},skillShow:!1,dataskill:"",skillList:[],skillLists:[],pushText:"保存"}},onPageScroll:function(t){this.scrollTop=t.scrollTop},mounted:function(){if(this.mobile=t.getStorageSync("mobile"),this.weixin=t.getStorageSync("weixin"),this.$mp.query.data){var i=decodeURIComponent(this.$mp.query.data);i=JSON.parse(i),this.skillList=i,this.navlist=i}this.getcommunitySkill(),this.$forceUpdate()},methods:{selectKill:function(){t.navigateTo({url:"/pages/push/skill?type=1&data="+this.detail.skill})},skillClose:function(){this.skillShow=!1},getmyDarenInfo:function(){var i=this,e={community_id:t.getStorageSync("community_id")};this.Api.myDarenInfo(e).then((function(t){if(console.log(t),1==t.code){if(i.detail=t.data,!t.data.id)return void(i.pushText="发布");i.pushText="修改",i.title=i.detail.title,i.content=i.detail.content,i.mobile=i.detail.mobile,i.weixin=i.detail.weixin;var e=[];n.upload.toString();t.data.images&&t.data.images.map((function(t){var i={};i.url=t.replace(/https\:\/\/sq\.wenlinapp\.com\/upload\//g,""),i.http_url=t,i.filename=t,e.push(i)})),i.radioList.map((function(t){t.value==i.detail.opening?t.check=!0:t.check=!1}));var l=[];if(0==i.skillList.length){if(t.data.skill){var s=t.data.skill.split(",");i.navlist.map((function(t){s.map((function(i){t.skill_id==i&&(t.check=!0,l.push(t))}))})),i.skillList=l}}else{var o=[];i.skillList.map((function(t){o.push(t.skill_id)})),i.detail.skill=o.join(","),console.log(i.detail.skill)}i.uploadList=e,i.$forceUpdate()}}))},getcommunitySkill:function(){var t=this;this.Api.communitySkill({}).then((function(i){1==i.code&&(i.data.map((function(t){t.check=!1})),0==t.navlist.length&&(t.navlist=i.data),t.getmyDarenInfo())}))},inputTypeHandle:function(t){this.inputType=t},keyBack:function(){this.priceView=!1},keyClick:function(t){1==this.inputType?isNaN(t)?"del"==t?this.sell_price=isNaN(this.sell_price)?"":this.sell_price.substring(0,this.sell_price.length-1):"confirm"==t?this.priceView=!1:"price"==t&&(this.sell_price="面议"):this.sell_price=isNaN(this.sell_price)?"":this.sell_price.toString()+t.toString():2==this.inputType?isNaN(t)?"del"==t?this.sell_price1=this.sell_price1.substring(0,this.sell_price1.length-1):"confirm"==t&&(this.priceView=!1):this.sell_price1=this.sell_price1.toString()+t.toString():3==this.inputType&&(isNaN(t)?"del"==t?this.sell_price2=this.sell_price2.substring(0,this.sell_price2.length-1):"confirm"==t&&(this.priceView=!1):this.sell_price2=this.sell_price2.toString()+t.toString()),this.$forceUpdate()},priceClick:function(){console.log(this.type,this.sell_type),3==this.type&&2!=this.sell_type&&(this.priceView=!0)},uploadDel:function(t){this.uploadList.splice(t,1)},pushClick:function(i){var e=this,n={title:this.title,content:this.content,phone:this.mobile,weixin:this.weixin,opening:this.opening,type:this.type,community_id:t.getStorageSync("community_id"),id:this.detail.id},l=[];if(this.uploadList.map((function(t){l.push(t.url)})),n.content){if(3==this.type&&(n.sell_type=this.sell_type,n.sell_price=this.sell_price.length?this.sell_price:"面议"),n.images=l.join(","),6==this.type){var s=[];if(this.skillList.map((function(t){t&&s.push(t.skill_id)})),0==s.length)return void t.showToast({title:"请选择技能",icon:"none",duration:2e3});n.skill=s.join(",")}6==this.type&&(n.id?this.Api.updateMyDaren(n).then((function(i){1==i.code?t.showToast({title:i.msg,duration:2e3,success:function(){i.data.add?(e.add_type=-1==i.data.add?"-":"+",e.score_text=i.data.score,e.$refs.integraltip.show(),setTimeout((function(){e.add_type="",e.score_text="",e.$refs.integraltip.close(),t.navigateBack({delta:2})}),2e3)):t.navigateBack({delta:2})}}):t.showToast({title:i.msg,icon:"none",duration:2e3})})):this.Api.publishDynamicsDaren(n).then((function(i){1==i.code?t.showToast({title:i.msg,duration:2e3,success:function(){i.data.add?(e.add_type=-1==i.data.add?"-":"+",e.score_text=i.data.score,e.$refs.integraltip.show(),setTimeout((function(){e.add_type="",e.score_text="",e.$refs.integraltip.close(),t.navigateBack({delta:2})}),2e3)):t.navigateBack({delta:2})}}):t.showToast({title:i.msg,icon:"none",duration:2e3})})))}else t.showToast({title:"请输入内容",icon:"none",duration:2e3})},chooseImage:function(){var i=this;t.chooseImage({count:9-this.uploadList.length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){var e=t.tempFilePaths;e.map((function(t){i.Api.uploadOne(t).then((function(t){1==t.code&&(console.log(t.data),i.uploadList.push(t.data))}))}))}})},customConduct:function(t){console.log(t)},titleInput:function(t){this.title=t.detail.value},contentInput:function(t){this.content=t.detail.value},weixinInput:function(t){this.weixin=t.detail.value},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1)},navClick:function(t){this.navlist.map((function(i){var e=!0;i.skill_id==t.skill_id&&(e=!i.check,i.check=e,console.log(e))}))},buyClick:function(t){var i=this;this.buyList.map((function(e){e.name==t.name?(e.check=!0,i.sell_type,i.sell_type=t.value,i.sell_price=""):e.check=!1}))},navAdd:function(t){this.skillShow=!0},okSkill:function(){var i=this;if(this.$refs.skill.inputValue){var e={title:this.$refs.skill.inputValue};this.Api.communityDynamicsAddSkill(e).then((function(e){1==e.code?(t.showToast({title:e.msg,duration:2e3}),i.skillShow=!1,i.$refs.skill.inputValue="",i.getcommunitySkill(),i.getmyDarenInfo()):t.showToast({title:e.msg,icon:"none",duration:2e3})}))}else t.showToast({title:"请输入技能",icon:"none",duration:2e3})},radioClick:function(t){var i=this;this.radioList.map((function(e){e.name==t.name?(e.check=!0,i.opening=e.value):e.check=!1}))},addlikeInput:function(t){this.$nextTick((function(){this.liketext=t.detail.value.substr(0,8)}))}},components:{navigationCustom:a,Skill:o,Integraltip:s}};i.default=c}).call(this,e("543d")["default"])},eb77:function(t,i,e){"use strict";e.r(i);var n=e("88e7"),l=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=l.a}},[["4f9a","common/runtime","common/vendor"]]]);