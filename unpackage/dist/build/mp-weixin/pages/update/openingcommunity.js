(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/update/openingcommunity"],{"155d":function(t,e,a){"use strict";a.r(e);var n=a("676d"),i=a("ca2c");for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("4552");var c,u=a("f0c5"),r=Object(u["a"])(i["default"],n["b"],n["c"],!1,null,"51a15dcc",null,!1,n["a"],c);e["default"]=r.exports},3862:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("b133"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(){a.e("components/struggler-navigationCustom/navigation-custom").then(function(){return resolve(a("e7f2"))}.bind(null,a)).catch(a.oe)},c={components:{navigationCustom:o},data:function(){return{showtoolbar:!0,areaShow:!1,config:{title:"申请开通小区",bgcolor:"white",fontcolor:"#0D1C3F",type:1,transparent:!1,linear:!1,share:!1},scrollTop:0,scrollMaxHeight:200,community:"",building:"",unit:"",room:"",setcommunityValue:"",textread:"《问邻服务协议及隐私政策》",pickerId:!1,picker:[{value:1,label:"业主"},{value:2,label:"亲友"},{value:3,label:"租客"}],pickerValue:0,areaObj:{},areaValue:"",address:"",mobile:"",finish:!1,recommend:!1,recommendList:[],areaList:n.default,uploadList:[],params:{title:"",address:"",contact_phone:"",province:"",city:"",area:"",building:"",unit:"",room:"",type:"",images:""},subFlag:!1}},onLoad:function(){console.log(n.default),console.log("aaa")},onShow:function(){console.log("bbb")},watch:{params:{handler:function(t){var e=0,a=Object.keys(t).length;Object.values(t).map((function(t,a){t&&e++})),this.subFlag=e==a},deep:!0}},methods:{joinHandler:function(e){t.navigateTo({url:"personal?data="+encodeURIComponent(JSON.stringify(e))})},goback:function(){this.recommend=!1},getGPS:function(){var t=this;wx.getLocation({type:"wgs84",isHighAccuracy:!0,success:function(e){var a=e.latitude,n=e.longitude;wx.chooseLocation({latitude:a,longitude:n,success:function(e){console.log(e,"res"),t.params.address=e.address}})}})},confirmadd:function(){if(!(this.areaObj[0].name&&this.areaObj[1].name&&this.areaObj[2].name))return this.$u.toast("请选择省市区");this.areaValue=this.areaObj[0].name+this.areaObj[1].name+this.areaObj[2].name,this.params.province=this.areaObj[0].code,this.params.city=this.areaObj[1].code,this.params.area=this.areaObj[2].code,this.areaShow=!1},changeHandler:function(t){this.areaObj=t.detail.values},confirmHandler:function(t){this.areaObj=t,this.areaValue=t.province.label+"/"+t.city.label+"/"+t.area.label,console.log(this.areaValue),this.areaShow=!1},getPhoneNumber:function(e){var a=this;console.log(e);var n=e.detail,i=n.encryptedData,o=n.iv;this.Api.setUserPhoneBySecret({encrypted_data:i,iv:o}).then((function(e){1==e.code&&(a.params.contact_phone=e.data,t.setStorageSync("mobile",e.data))}))},onPageScroll:function(t){this.scrollTop=t.scrollTop},mobileInput:function(t){this.params.contact_phone=t.detail.value},addressInput:function(t){this.params.address=t.detail.value},openNear:function(){var e=this,a={longitude:t.getStorageSync("longitude"),latitude:t.getStorageSync("latitude")};this.Api.getNearCommunity(a).then((function(t){1==t.code&&t.data.length&&(e.recommend=!0,e.recommendList=t.data)}))},communityInput:function(t){var e=this;this.params.title=t.detail.value,0!=this.params.title.length&&this.Api.searchCommunity({title:this.params.title}).then((function(t){1==t.code&&t.data.length&&(e.recommend=!0,e.recommendList=t.data)}))},buildingInput:function(t){var e=this;this.$nextTick((function(){var a=t.detail.value.replace(/[^a-z|0-9]/gi,"");e.building=a,e.$forceUpdate()}))},unitInput:function(t){var e=this;this.$nextTick((function(){e.unit=t.detail.value.replace(/[^a-z|0-9]/gi,""),e.$forceUpdate()}))},roomInput:function(t){var e=this;this.$nextTick((function(){e.room=t.detail.value.replace(/[^a-z|0-9]/gi,""),e.$forceUpdate()}))},gosecret:function(){t.navigateTo({url:"/pages/update/secret"})},getArea:function(){this.areaShow=!0},setcommunityHandler:function(){var e=this;if(!this.subFlag)return this.$u.toast("请认真填写资料");var a=this;this.Api.communityOpening(this.params).then((function(n){1==n.code&&t.showToast({title:n.msg,duration:2e3,success:function(){t.setStorageSync("committee_id",n.data.committee_id),t.setStorageSync("community_id",n.data.community_id),t.setStorageSync("community_menu",e.communityTitle),e.community_menu=e.communityTitle;var i=t.getStorageSync("pid");if(i){var o={from_user_id:i};a.Api.inviteNeighbor(o).then((function(e){t.reLaunch({url:"/pages/index/index"})}))}else t.reLaunch({url:"/pages/index/index"})}})}))},openPicker:function(t){this.pickerId=!0},closePicker:function(t){this.pickerId=!1},pickerChange:function(t){var e=t.detail.value[0];this.pickerValue=e},pickerClick:function(t){this.params.type=this.picker[this.pickerValue].value,this.setcommunityValue=this.picker[this.pickerValue].label,this.pickerId=!1},chooseImage:function(){var e=this;t.chooseImage({count:9-this.uploadList.length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){var a=t.tempFilePaths;a.map((function(t){e.Api.uploadOne(t).then((function(t){if(1==t.code){console.log(t.data),e.uploadList.push(t.data);var a=[];e.uploadList.map((function(t){a.push(t.url)})),e.params.images=a.join(",")}}))}))}})},uploadDel:function(t){var e=this;this.uploadList.splice(t,1);var a=[];e.uploadList.map((function(t){a.push(t.url)})),e.params.images=a.join(",")}}};e.default=c}).call(this,a("543d")["default"])},4552:function(t,e,a){"use strict";var n=a("d815"),i=a.n(n);i.a},"676d":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var n={uPopup:function(){return a.e("uview-ui/components/u-popup/u-popup").then(a.bind(null,"b3a9"))}},i=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.areaShow=!1})},o=[]},ca2c:function(t,e,a){"use strict";a.r(e);var n=a("3862"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},cc71:function(t,e,a){"use strict";(function(t){a("4038");n(a("66fd"));var e=n(a("155d"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},d815:function(t,e,a){}},[["cc71","common/runtime","common/vendor"]]]);