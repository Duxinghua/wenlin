(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/update/answerdetail"],{"0c63":function(t,e,n){"use strict";n.r(e);var i=n("5268"),r=n("8518");for(var c in r)"default"!==c&&function(t){n.d(e,t,(function(){return r[t]}))}(c);n("e28a");var a,s=n("f0c5"),u=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"602b6d6e",null,!1,i["a"],a);e["default"]=u.exports},"256f":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("a34a"));function r(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,i,r,c,a){try{var s=t[c](a),u=s.value}catch(o){return void n(o)}s.done?e(u):Promise.resolve(u).then(i,r)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(t){c(a,i,r,s,u,"next",t)}function u(t){c(a,i,r,s,u,"throw",t)}s(void 0)}))}}var s={data:function(){return{imgUrl:this.Config.minUrl,detail:{},answer_id:0,type:"ts",interval:3e3,duration:500,indicatorDots:!0,timestamp:0,list:[],currentIndex:0,count:0,time:0,content:null,confirm:!1,next:!1}},onLoad:function(t){this.answer_id=t.answer_id||1,this.getList()},methods:{getList:function(){var t=this;return a(i.default.mark((function e(){var n;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.Api.questionList({answer_id:t.answer_id});case 2:n=e.sent,1==n.code&&(n.data.list.map((function(t){t.ask=[],Object.keys(t.content).map((function(e){1==t.type?t.ask.push({key:e,value:t.content[e],check:!1,answer:t.answer==e}):2==t.type&&t.ask.push({key:e,value:t.content[e],check:!1,answer:new String(t.answer).toString().indexOf(e)>-1})}))})),t.list=n.data.list,t.detail=t.list[0],1==t.detail.type?t.confirm=!1:2==t.detail.type&&(t.confirm=!0),t.timestamp=n.data.total_time,t.draw_id=n.data.detail.draw_id);case 4:case"end":return e.stop()}}),e)})))()},timeChange:function(t){this.time=this.timestamp-t},change:function(t){var e=this.list[this.currentIndex].type,n=0,i=t.detail.current;if(this.currentIndex=i,this.list[this.currentIndex].ask.map((function(t){t.check&&n++})),1==e){if(this.confirm=!1,1!=n)return this.currentIndex=i-1,this.$u.toast("请选择一个答案")}else if(2==e&&(this.confirm=!0,0==n))return this.currentIndex=i-1,this.$u.toast("请选择一个答案")},calc:function(){var e=0,n={};this.list.map((function(t,i){if(1==t.type){var r=0,c=0;t.ask.map((function(e){e.check&&(n[i+1]=e.key,r++,t.answer==e.key&&(c=1))})),1==r&&1==c&&(e+=t.score)}if(2==t.type){r=0,c=0;var a=t.answer.split(",").length,s=[];t.ask.map((function(t){t.check&&(r++,s.push(t.key)),t.check==t.answer&&1==t.check&&c++})),n[i+1]=s.join(","),r==c&&r==a&&(e+=t.score)}})),this.content=n,this.count=e,t.redirectTo({url:"answerresult?count="+this.count+"&time="+this.time+"&answer_id="+this.answer_id+"&content="+encodeURIComponent(JSON.stringify(this.content))+"&draw_id="+this.draw_id})},confirmHandler:function(){var t=[];this.detail.ask.map((function(e){e.check&&t.push(e.key)}));this.detail.answer.split(",").length;var e=[];this.detail.ask.map((function(t){t.check&&(e.push(t.key)),t.check==t.answer&&1==t.check&&0})),this.next=!0,this.confirm=!1},nextHandler:function(){this.currentIndex+1!=this.list.length?(this.currentIndex++,this.detail=this.list[this.currentIndex],this.next=!1,1==this.detail.type?this.confirm=!1:2==this.detail.type&&(this.confirm=!0)):this.calc()},checkHandler:function(t){if(console.log(t),!this.next){var e=this.list[this.currentIndex].type,n=this;this.list[this.currentIndex].ask.map((function(i){if(2==e&&(t.key==i.key?i.check=!i.check:console.log(1)),1==e)if(t.key==i.key)if(i.check=!0,i.key==n.detail.answer){if(n.currentIndex+1==n.list.length)return;n.currentIndex++,n.detail=n.list[n.currentIndex]}else n.next=!0;else i.check=!1})),2==e&&(n.detail=n.list[n.currentIndex])}}}};e.default=s}).call(this,n("543d")["default"])},5268:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return i}));var i={uCountDown:function(){return n.e("uview-ui/components/u-count-down/u-count-down").then(n.bind(null,"2e83"))}},r=function(){var t=this,e=t.$createElement;t._self._c},c=[]},8518:function(t,e,n){"use strict";n.r(e);var i=n("256f"),r=n.n(i);for(var c in i)"default"!==c&&function(t){n.d(e,t,(function(){return i[t]}))}(c);e["default"]=r.a},a081:function(t,e,n){"use strict";(function(t){n("4038");i(n("66fd"));var e=i(n("0c63"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},a4f2:function(t,e,n){},e28a:function(t,e,n){"use strict";var i=n("a4f2"),r=n.n(i);r.a}},[["a081","common/runtime","common/vendor"]]]);