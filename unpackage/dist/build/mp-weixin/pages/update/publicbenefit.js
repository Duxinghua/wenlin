(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/update/publicbenefit"],{"1b18":function(t,e,i){"use strict";(function(t){i("4038");n(i("66fd"));var e=n(i("ab72"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"4f71":function(t,e,i){},"62fb":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={uImage:function(){return i.e("uview-ui/components/u-image/u-image").then(i.bind(null,"2a28"))},uPopup:function(){return i.e("uview-ui/components/u-popup/u-popup").then(i.bind(null,"b3a9"))},uInput:function(){return Promise.all([i.e("common/vendor"),i.e("uview-ui/components/u-input/u-input")]).then(i.bind(null,"5d6e"))}},o=function(){var t=this,e=t.$createElement,i=(t._self._c,1==t.labelIndex?t.__map(t.detail.new_list,(function(e,i){var n=t.__get_orig(e),o=t._f("formatTime")(e.create_time);return{$orig:n,f0:o}})):null);t._isMounted||(t.e0=function(e){e.stopPropagation(),t.scoreshow=!1}),t.$mp.data=Object.assign({},{$root:{l0:i}})},a=[]},"79d1":function(t,e,i){"use strict";var n=i("4f71"),o=i.n(n);o.a},ab72:function(t,e,i){"use strict";i.r(e);var n=i("62fb"),o=i("e302");for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("79d1");var r,s=i("f0c5"),u=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"51410775",null,!1,n["a"],r);e["default"]=u.exports},e302:function(t,e,i){"use strict";i.r(e);var n=i("e3f7"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},e3f7:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=r(i("4cca")),a=i("787b");function r(t){return t&&t.__esModule?t:{default:t}}var s=null,u=null,c=function(){i.e("components/struggler-navigationCustom/navigation-custom").then(function(){return resolve(i("e7f2"))}.bind(null,i)).catch(i.oe)},f={components:{navigationCustom:c},data:function(){return{imgUrl:this.Config.minUrl,config:{title:"社区公益",bgcolor:"white",fontcolor:"rgba(51, 51, 51, 1)",type:1,tnransparent:!1,linear:!1,share:!1},scrollTop:0,scrollMaxHeight:200,labelIndex:1,cWidth:"",cHeight:"",pixelRatio:1,textarea:"",Interactive:"",detail:{score:0,total_score:0,ranking:0,score_to_money:0},scoreshow:!1,user:{},scoreValue:"",community_id:0,scorelist:[],page:1,page_size:10,total_pages:0}},onLoad:function(e){this.community_id=e.community_id,this.user=t.getStorageSync("user"),n=this,this.cWidth=t.upx2px(707),this.cHeight=t.upx2px(361),this.getServerData(),this.getList()},onShareAppMessage:function(){},onPageScroll:function(t){this.scrollTop=t.scrollTop},onReachBottom:function(){this.total_pages>this.page&&(this.page++,this.getList(!0))},methods:{getList:function(e){var i=this,n={page_size:this.page_size,page:this.page,community_id:this.community_id||t.getStorageSync("community_id")};this.Api.donateScoreList(n).then((function(t){1==t.code&&(i.total_pages=t.data.total_pages,i.scorelist=t.data.list)}))},confirmHandler:function(){var e=this;if(!this.scoreValue)return this.$u.toast("请输入捐赠积分");var i={to_community_id:this.community_id||t.getStorageSync("community_id"),from_community_id:t.getStorageSync("community_id"),score:this.scoreValue};this.Api.userDonateScore(i).then((function(t){return 1==t.code?(e.scoreshow=!1,e.getServerData(),e.scoreValue="",e.$u.toast(t.msg)):e.$u.toast(t.msg)}))},todoHandler:function(){this.scoreshow=!0},LabelHandler:function(t){this.labelIndex=t,this.page=1,this.page_size=10,this.scorelist=[],1==t?this.getServerData():2==t&&this.getList()},getServerData:function(){var e=this,i={community_id:this.community_id||t.getStorageSync("community_id")};this.Api.getCommunityScore(i).then((function(t){if(1==t.code){var i=[],o=[];t.data.community_7day.map((function(t){i.push(e.formatTimeMd(t.today_time)),o.push(t.total_score)})),e.detail=t.data;var a={categories:i,series:[{name:"公益金",data:o}]};n.textarea=JSON.stringify(a),n.showLineA("canvasLineA",a)}}))},showLineA:function(t,e){s=new o.default({$this:n,canvasId:t,type:"line",colors:["#ffffff"],fontSize:11,padding:[15,15,0,15],legend:{show:!1,padding:5,lineHeight:11,margin:0},dataLabel:!1,dataPointShape:!1,background:"#FFFFFF",pixelRatio:n.pixelRatio,categories:e.categories,series:e.series,animation:!0,xAxis:{type:"grid",axisLineColor:"#ffffff",fontColor:"#ffffff",gridColor:"transparent",gridType:"dash",dashLength:8},yAxis:{gridType:"dash",axisLineColor:"#ffffff",fontColor:"#ffffff",gridColor:"transparent",dashLength:8},width:n.cWidth*n.pixelRatio,height:n.cHeight*n.pixelRatio,extra:{line:{type:"straight"},tooltip:{gridColor:"#ffffff",labelFontColor:"#ffffff",horizentalLine:!1,xAxisLabel:!1,yAxisLabel:!1}}})},touchLineA:function(t){u=Date.now()},moveLineA:function(t){var e=Date.now(),i=e-u;if(!(i<Math.floor(1e3/60))){u=e;var n=s.getCurrentDataIndex(t);if(n>-1&&n<s.opts.categories.length){var o=s.opts.categories[n],a=s.opts.series[0].name,r=s.opts.series[0].data[n];this.Interactive=a+":"+o+"-"+r+"元"}s.showToolTip(t,{format:function(t,e){return e+" "+t.name+":"+t.data}})}},touchEndLineA:function(t){var e=s.getCurrentDataIndex(t);if(e>-1&&e<s.opts.categories.length){var i=s.opts.categories[e],n=s.opts.series[0].name,o=s.opts.series[0].data[e];this.Interactive=n+":"+i+"-"+o+"元"}s.touchLegend(t),s.showToolTip(t,{format:function(t,e){return e+" "+t.name+":"+t.data}})},changeData:function(){if((0,a.isJSON)(n.textarea)){var e=JSON.parse(n.textarea);s.updateData({series:e.series,categories:e.categories})}else t.showToast({title:"数据格式错误",image:"../../../static/images/alert-warning.png"})}}};e.default=f}).call(this,i("543d")["default"])}},[["1b18","common/runtime","common/vendor"]]]);