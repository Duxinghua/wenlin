(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/update/message"],{"0fcd":function(t,e,i){"use strict";var s=i("b603"),o=i.n(s);o.a},1718:function(t,e,i){"use strict";i.r(e);var s=i("4a78"),o=i.n(s);for(var a in s)"default"!==a&&function(t){i.d(e,t,(function(){return s[t]}))}(a);e["default"]=o.a},"348b":function(t,e,i){"use strict";(function(t){i("4038");s(i("66fd"));var e=s(i("ad3c"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"417d":function(t,e,i){"use strict";var s;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return s}));var o=function(){var t=this,e=t.$createElement,i=(t._self._c,t.__map(t.sysNoticesList,(function(e,i){var s=t.__get_orig(e),o=1==t.headerIndex?t._f("formatTime")(e.create_time):null;return{$orig:s,f0:o}}))),s=t.__map(t.sysNoticesList,(function(e,i){var s=t.__get_orig(e),o=2==t.headerIndex?t._f("formatTime")(e.create_time):null;return{$orig:s,f1:o}})),o=t.__map(t.sysNoticesList,(function(e,i){var s=t.__get_orig(e),o=3==t.headerIndex?t._f("formatTime")(e.create_time):null;return{$orig:s,f2:o}})),a=t.__map(t.sysNoticesList,(function(e,i){var s=t.__get_orig(e),o=4==t.headerIndex?t._f("formatTime")(e.create_time):null;return{$orig:s,f3:o}}));t.$mp.data=Object.assign({},{$root:{l0:i,l1:s,l2:o,l3:a}})},a=[]},"4a78":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){i.e("components/nodata/nodata").then(function(){return resolve(i("b641"))}.bind(null,i)).catch(i.oe)},o=function(){i.e("components/reply/reply").then(function(){return resolve(i("d475"))}.bind(null,i)).catch(i.oe)},a=function(){i.e("components/struggler-navigationCustom/navigation-custom").then(function(){return resolve(i("e7f2"))}.bind(null,i)).catch(i.oe)},n={data:function(){return{config:{title:"我的消息",bgcolor:"white",fontcolor:"rgba(51, 51, 51, 1)",type:1,transparent:!1,linear:!1,share:!1},scrollTop:0,scrollMaxHeight:200,catelist:[{id:1,text:"全部"},{id:2,text:"求助"},{id:3,text:"新鲜事"},{id:4,text:"闲置"},{id:5,text:"鹊桥"},{id:6,text:"便民"},{id:7,text:"达人"}],headerIndex:1,page:1,page_size:10,type:1,sysNoticesList:[],total_page:0,unreads:{comment_unread:0,leave_message_unread:0,sys_notices_unread:0,thanks_unread:0},replayShow:!1,parent_text:"",replyFlag:!1,inputValues:"",showReply:!1,replyitem:{},showNodata:!1}},mounted:function(){var t=this;this.getmySysNotices(),this.$getCount((function(e){1==e.code&&(t.unreads=e.data)}))},onPageScroll:function(t){this.scrollTop=t.scrollTop},methods:{messageHandler:function(){this.$Bus.$emit("countmsg","countmsg")},todoReply:function(t){this.replayShow=!this.replayShow,this.replyitem=t},faceClick:function(){this.showReply=!this.showReply},InputFocus:function(){this.showReply=!this.showReply},inputValueHander:function(e){var i=this;if(e){var s={dynamics_id:this.replyitem.object_id,third_id:this.replyitem.object_id,object_type:this.replyitem.object_type,parent_id:this.replyitem.id,community_id:this.replyitem.community_id,content:e};this.Api.setComments(s).then((function(e){1==e.code&&t.showToast({icon:"success",title:e.msg,duration:2e3,success:function(){i.$refs.reply.clearInput(),i.replayShow=!1,i.getmySysNotices()}})}))}else t.showToast({icon:"",title:"请输入评论内容"})},goDetails:function(e){var i=this;this.getmySysNotices(),this.messageHandler(),this.$getCount((function(t){1==t.code&&(i.unreads=t.data)})),3==this.headerIndex?t.navigateTo({url:"/pages/index/detail?id="+e.object_id+"&type=1"}):7==e.object_type||8==e.object_id?t.navigateTo({url:"/pages/index/detail?dynamics_id="+e.object_id+"&type="+e.object_type+"&id="+e.third_id}):5==e.object_type&&0!=e.third_id?t.navigateTo({url:"/pages/index/cdetail?dynamics_id="+e.object_id+"&type="+e.object_type+"&id="+e.third_id}):t.navigateTo({url:"/pages/index/detail?id="+e.object_id+"&type="+e.object_type})},getPerson:function(e){var i=this;this.getmySysNotices(),this.messageHandler(),this.$getCount((function(t){1==t.code&&(i.unreads=t.data)})),t.navigateTo({url:"/pages/index/personalcard?user_id="+e.from_user_id+"&community_id="+e.from_community_id})},goDetail:function(e){var i=this;this.getmySysNotices(),this.messageHandler(),this.$getCount((function(t){1==t.code&&(i.unreads=t.data)})),t.navigateTo({url:"/pages/update/messagedetail?id="+e})},customConduct:function(t){console.log(t)},navClick:function(t){this.cateIndex=t.id},headerClick:function(t){this.headerIndex=t,this.page=1,this.page_size=10,this.total_page=0,this.sysNoticesList=[],this.replayShow=!1,this.getmySysNotices()},goPer:function(e){t.navigateTo({url:"/pages/index/personalcard?user_id="+e.user_id+"&community_id="+e.community_id})},getmySysNotices:function(e){var i=this,s={page:this.page,page_size:this.page_size,object_type:1,community_id:t.getStorageSync("community_id")};1==this.headerIndex?this.Api.mySysNotices(s).then((function(t){1==t.code&&(e?(i.sysNoticesList=i.sysNoticesList.concat(t.data.list),i.total_page=t.data.total_page):(i.sysNoticesList=t.data.list,i.total_page=t.data.total_page),0==i.sysNoticesList.length?i.showNodata=!0:i.showNodata=!1)})):2==this.headerIndex?this.Api.myCommentNotices(s).then((function(t){if(1==t.code){if(e){var s=t.data.list;s.map((function(t){t.nodes=new String(t.comment_content).toString().replace(/\[em\_(\d{1,3})\]/g,'<img class="imgemoji" src=https://sq.wenlinapp.com/bkhumor-emoji/$1.gif  align=middle/>')})),i.sysNoticesList=i.sysNoticesList.concat(s),i.total_page=t.data.total_page}else{s=t.data.list;s.map((function(t){t.nodes=new String(t.comment_content).toString().replace(/\[em\_(\d{1,3})\]/g,'<img class="imgemoji" src=https://sq.wenlinapp.com/bkhumor-emoji/$1.gif  align=middle/>')})),i.sysNoticesList=s,i.total_page=t.data.total_page}0==i.sysNoticesList.length?i.showNodata=!0:i.showNodata=!1}})):3==this.headerIndex?this.Api.myThanksNotices(s).then((function(t){if(1==t.code){if(e){var s=t.data.list;s.map((function(t){t.nodes="我："+new String(t.content).toString().replace(/\[em\_(\d{1,3})\]/g,'<img class="imgemoji" src=https://sq.wenlinapp.com/bkhumor-emoji/$1.gif  align=middle/>')})),i.sysNoticesList=i.sysNoticesList.concat(s),i.total_page=t.data.total_page}else{s=t.data.list;s.map((function(t){t.nodes="我："+new String(t.content).toString().replace(/\[em\_(\d{1,3})\]/g,'<img class="imgemoji" src=https://sq.wenlinapp.com/bkhumor-emoji/$1.gif  align=middle/>')})),i.sysNoticesList=s,i.total_page=t.data.total_page}0==i.sysNoticesList.length?i.showNodata=!0:i.showNodata=!1}})):4==this.headerIndex&&this.Api.myLeaveMessageNotices(s).then((function(t){1==t.code&&(e?(i.sysNoticesList=i.sysNoticesList.concat(t.data.list),i.total_page=t.data.total_page):(i.sysNoticesList=t.data.list,i.total_page=t.data.total_page),0==i.sysNoticesList.length?i.showNodata=!0:i.showNodata=!1)}))}},onReachBottom:function(){this.total_page>this.page&&(this.page++,this.getmySysNotices(!0))},components:{navigationCustom:a,Reply:o,Nodata:s}};e.default=n}).call(this,i("543d")["default"])},ad3c:function(t,e,i){"use strict";i.r(e);var s=i("417d"),o=i("1718");for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("0fcd");var n,c=i("f0c5"),d=Object(c["a"])(o["default"],s["b"],s["c"],!1,null,"8844d346",null,!1,s["a"],n);e["default"]=d.exports},b603:function(t,e,i){}},[["348b","common/runtime","common/vendor"]]]);