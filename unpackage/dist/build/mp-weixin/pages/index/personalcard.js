(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/personalcard"],{"19ea":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){i.e("components/struggler-navigationCustom/navigation-custom").then(function(){return resolve(i("e7f2"))}.bind(null,i)).catch(i.oe)},o=function(){i.e("components/leavewords/leavewords").then(function(){return resolve(i("3fcb"))}.bind(null,i)).catch(i.oe)},s={data:function(){return{config:{title:"个人名片",bgcolor:"white",fontcolor:"rgba(51, 51, 51, 1)",type:1,transparent:!1,linear:!1,share:!1},scrollTop:0,scrollMaxHeight:200,query:{},detail:{skill_arr:[]},know_text:"认识TA",messageShow:!1,messageText:"",typeFlag:!0,deliveryFlag:!1,canvasFlag:!0,scrollFixed:!1,posterData:{},personShow:!0,integralShow:!1,integralValue:0}},mounted:function(e){if(this.$mp.query){console.log(this.$mp.query,"query");var i=Object.assign({},this.$mp.query);this.query=i,console.log(this.$mp.query.user_id,"user_id",t.getStorageSync("user").id),t.getStorageSync("user").id==this.$mp.query.user_id?this.personShow=!1:this.personShow=!0}this.getOtherUserInfo(this.query)},methods:{goCommittee:function(){t.navigateTo({url:"/pages/index/communitycard?community_id="+this.detail.community_id})},textareaBlur:function(t){console.log(t.detail)},closeMessage:function(){this.messageShow=!1},messageHandler:function(){1!=t.getStorageSync("singPage")?(this.messageText="",this.$forceUpdate(),this.messageShow=!0):t.showToast({title:"请前往小程序使用完整服务",icon:"none",duration:2e3})},goDadetail:function(){if(this.detail.skill_arr.length&&1==this.detail.skill.opening)t.navigateTo({url:"/pages/index/detail?type=6&id="+this.detail.skill.id+"&community_id="+this.detail.community_id});else{if(this.detail.community_id!=t.getStorageSync("community_id"))return void t.showToast({icon:"none",title:"本达人信息仅限本小区用户可见",duration:2e3});t.navigateTo({url:"/pages/index/detail?type=6&id="+this.detail.skill.id+"&community_id="+this.detail.community_id})}},goUsed:function(){t.navigateTo({url:"/pages/update/myspare?user_id="+this.detail.user_id+"&type=3&community_id="+this.detail.community_id+"&user_nickname="+this.detail.user_nickname})},submitTodo:function(e){var i=this;if(1!=t.getStorageSync("singPage"))if(e){var n={to_user_id:this.query.user_id,content:e,to_community_id:t.getStorageSync("community_id"),from_community_id:t.getStorageSync("community_id")};this.Api.userleaveMessage(n).then((function(e){1==e.code?t.showToast({icon:"success",title:e.msg,success:function(){i.messageText="",i.messageShow=!1}}):t.showToast({icon:"none",title:e.msg,success:function(){}})}))}else t.showToast({icon:"",title:"请输入留言内容"});else t.showToast({title:"请前往小程序使用完整服务",icon:"none",duration:2e3})},knowTodo:function(){var t={to_user_id:this.query.user_id,to_community_id:this.detail.community_id,from_community_id:this.detail.community_id};0==this.detail.is_kown?this.usersetKown(t):this.detail.is_kown>0&&this.userunSetKown(t)},usersetKown:function(e){var i=this;this.Api.usersetKown(e).then((function(e){1==e.code?t.showToast({icon:"success",title:e.msg,success:function(){i.getOtherUserInfo(i.query)}}):t.showToast({icon:"none",title:e.msg,success:function(){}})}))},userunSetKown:function(e){var i=this;this.Api.userunSetKown(e).then((function(e){1==e.code?t.showToast({icon:"success",title:e.msg,success:function(){i.getOtherUserInfo(i.query)}}):t.showToast({icon:"none",title:e.msg,success:function(){}})}))},getOtherUserInfo:function(t){var e=this;this.Api.getOtherUserInfo(t).then((function(t){if(1==t.code){e.detail=t.data;var i=[];t.data.skill.skill_desc?(i=t.data.skill.skill_desc.split(","),e.detail.skill_arr=i):e.detail.skill_arr=[],e.detail.skill_text=i.join("|"),-1==t.data.is_kown?e.know_text="自己":0==t.data.is_kown?e.know_text="认识TA":1==t.data.is_kown&&(e.know_text="取消认识")}}))},reportHandler:function(){t.navigateTo({url:"/pages/update/report?object_id="+this.query.user_id+"&object_type=10"})}},components:{navigationCustom:n,LeaveWords:o}};e.default=s}).call(this,i("543d")["default"])},2614:function(t,e,i){"use strict";i.r(e);var n=i("e09d"),o=i("fb54");for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("71afa");var u,a=i("f0c5"),r=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"1036f764",null,!1,n["a"],u);e["default"]=r.exports},"71afa":function(t,e,i){"use strict";var n=i("72c8"),o=i.n(n);o.a},"72c8":function(t,e,i){},d4f5:function(t,e,i){"use strict";(function(t){i("4038");n(i("66fd"));var e=n(i("2614"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},e09d:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={uPopup:function(){return i.e("uview-ui/components/u-popup/u-popup").then(i.bind(null,"b3a9"))},uInput:function(){return Promise.all([i.e("common/vendor"),i.e("uview-ui/components/u-input/u-input")]).then(i.bind(null,"5d6e"))}},o=function(){var t=this,e=t.$createElement;t._self._c},s=[]},fb54:function(t,e,i){"use strict";i.r(e);var n=i("19ea"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a}},[["d4f5","common/runtime","common/vendor"]]]);