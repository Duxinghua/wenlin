(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/committeedynamics"],{1069:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement;t._self._c},s=[]},"4b01":function(t,e,i){},6942:function(t,e,i){"use strict";var n=i("4b01"),o=i.n(n);o.a},8577:function(t,e,i){"use strict";i.r(e);var n=i("87e5"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a},"87e5":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("03c0"));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){i.e("components/findFault/findFault").then(function(){return resolve(i("7aab"))}.bind(null,i)).catch(i.oe)},a=function(){i.e("components/bkhumor-emoji/index").then(function(){return resolve(i("e4da"))}.bind(null,i)).catch(i.oe)},c=function(){i.e("components/struggler-navigationCustom/navigation-custom").then(function(){return resolve(i("e7f2"))}.bind(null,i)).catch(i.oe)},l=function(){i.e("components/userHeader/userheader").then(function(){return resolve(i("ecf2"))}.bind(null,i)).catch(i.oe)},u=function(){i.e("components/comment/comment").then(function(){return resolve(i("5711"))}.bind(null,i)).catch(i.oe)},r={data:function(){return{isShowEmj:!1,emojiIcon:"cuIcon-emoji",inputValue:"",config:{title:"",bgcolor:"white",fontcolor:"rgba(51, 51, 51, 1)",type:1,transparent:!1,linear:!1,share:!1},scrollTop:0,scrollMaxHeight:200,wxsj:!1,cardCur:0,swiperIndex:1,swiperList:[{id:0,type:"image",url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big84000.jpg"},{id:1,type:"image",url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big37006.jpg"},{id:2,type:"image",url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big39000.jpg"},{id:3,type:"image",url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big10001.jpg"},{id:4,type:"image",url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big25011.jpg"},{id:5,type:"image",url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big21016.jpg"},{id:6,type:"image",url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big99008.jpg"}],dotStyle:!1,towerStart:0,direction:"",navIndex:1,id:"",detail:{images:[]},commentList:[],parent_id:"",parent_text:"说说你的看法",community_id:"",findFaultType:1,findFaultCollect:!1,findFaultValue:!1,replyFlag:!0,total:0,page:1,page_size:10}},mounted:function(){this.$mp.query.id&&(this.id=this.$mp.query.id,this.getDetail())},onReachBottom:function(t){this.total>1&&this.total>this.page&&(this.page++,this.getCommentList(!0))},methods:{getCommentList:function(t){var e=this,i={object_id:this.id,object_type:this.detail.type,page:this.page,page_size:10};this.Api.getMultistageComments(i).then((function(i){if(1==i.code)if(t){var n=i.data.list;e.total=i.data.total_page,n.map((function(t){t.nodes=new String(t.content).toString().replace(/\[em\_(\d{1,3})\]/g,'<img class="imgemoji" src=https://sq.wenlinapp.com/bkhumor-emoji/$1.gif  align=middle/>'),t.children&&t.children.map((function(t){t.nodes=new String(t.content).toString().replace(/\[em\_(\d{1,3})\]/g,'<img class="imgemoji" src=https://sq.wenlinapp.com/bkhumor-emoji/$1.gif  align=middle/>')}))})),e.commentList=e.commentList.concat(n),e.commentpageTotal=i.data.total_page}else{n=i.data.list;e.total=i.data.total_page,n.map((function(t){t.nodes=new String(t.content).toString().replace(/\[em\_(\d{1,3})\]/g,'<img class="imgemoji" src=https://sq.wenlinapp.com/bkhumor-emoji/$1.gif  align=middle/>'),t.children&&t.children.map((function(t){t.nodes=new String(t.content).toString().replace(/\[em\_(\d{1,3})\]/g,'<img class="imgemoji" src=https://sq.wenlinapp.com/bkhumor-emoji/$1.gif  align=middle/>')}))})),e.commentList=n,e.commentpageTotal=i.data.total_page}}))},delHandler:function(e){this.Api.delComments({id:e.id}).then((function(e){1==e.code&&t.showToast({title:e.msg,duration:2e3})}))},faceClick:function(){this.isShowEmj=!this.isShowEmj},floverHandler:function(e){console.log(e);var i={object_id:e.id,object_type:e.object_type,community_id:t.getStorageSync("community_id")};this.Api.setLikes(i).then((function(t){console.log(t)}))},InputFocus:function(t){this.isShowEmj=!1,this.$emit("foc")},handleEmj:function(t){"[em_98]"==t?this.inputValue=this.inputValue.replace(/(\[[^\]]+\]|[\s\S])$/,""):this.inputValue+=t},showEmj:function(){var t=!this.isShowEmj;this.emojiIcon=t?"cuIcon-keyboard":"cuIcon-emoji",this.isShowEmj=t,this.$emit("show")},InputBlur:function(t){},inputValueHander:function(e){if(console.log(this.inputValue,"11"),this.inputValue){var i={object_id:this.id,object_type:this.detail.type,content:this.inputValue,parent_id:this.parent_id,community_id:t.getStorageSync("community_id")};this.Api.setComments(i).then((function(e){1==e.code&&t.showToast({title:e.msg,duration:2e3})}))}else t.showToast({title:"请输入评论内容",duration:2e3})},copy:function(e){var i="",n=this;1==e?i=this.detail.mobile:2==e&&(i=this.detail.weixin),t.setClipboardData({data:i,success:function(){t.showToast({title:"复制成功",duration:2e3}),n.wxsj=!1}})},previewImage:function(e){console.log(e),t.previewImage({loop:!0,current:e,urls:this.detail.images,success:function(){}})},getDetail:function(){var t=this;this.Api.communityDynamicsDetail({id:this.id}).then((function(e){1==e.code&&(t.detail=e.data,t.config.title=n.default.resultValue(e.data.type),t.getCommentList())}))},swiperChange:function(t){this.swiperIndex=t.detail.current+1},openWxsj:function(){this.wxsj=!0},closewxsj:function(){this.wxsj=!1},navClick:function(t){this.navIndex=t},moreClick:function(){this.findFaultType=this.detail.type,this.findFaultCollect=0!=this.detail.user_favorite,this.findFaultValue=!0},fCollect:function(e){var i={object_id:this.id,object_type:this.detail.type,community_id:t.getStorageSync("community_id")};0==this.detail.user_favorite?this.Api.setFavorites(i).then((function(e){e.code,t.showToast({title:e.msg,duration:2e3})})):1==this.detail.user_favorite&&this.Api.unsetFavorites(i).then((function(e){e.code,t.showToast({title:e.msg,duration:2e3})})),this.findFaultValue=!1,this.getDetail(),this.$forceUpdate()},fFind:function(t){},fClose:function(){this.findFaultValue=!1},replyHandler:function(t){console.log(t),this.replyFlag=!1,this.parent_id=t.id,this.parent_text="回复"+t.user.user_nickname}},components:{UserHeader:l,Comment:u,navigationCustom:c,emotion:a,FindFault:s},computed:{imgIndex:function(){return this.swiperIndex+"/"+this.detail.images.length}}};e.default=r}).call(this,i("543d")["default"])},c866:function(t,e,i){"use strict";(function(t){i("4038");n(i("66fd"));var e=n(i("ed61"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},ed61:function(t,e,i){"use strict";i.r(e);var n=i("1069"),o=i("8577");for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("6942");var a,c=i("f0c5"),l=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"3565a692",null,!1,n["a"],a);e["default"]=l.exports}},[["c866","common/runtime","common/vendor"]]]);